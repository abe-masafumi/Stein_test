<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>test document</title>
</head>

<body>

  <header>
    title
  </header>
  <main>
    main
    <input id="serach" type="text" placeholder="Ê§úÁ¥¢" style="font-size: 16px;">
    <input id="addform" type="text" placeholder="ËøΩÂä†" style="font-size: 16px;">
    <button id="addbutton">ÁôªÈå≤</button>
    <input id="editform" type="text" placeholder="Á∑®ÈõÜ" style="font-size: 16px;">
    <p class="no_schedule" data-title="" data-author="">Ê§úÁ¥¢„Åó„Åü„Çπ„Ç±„Ç∏„É•„Éº„É´„ÅØË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü</li>
    <ul id="ul">
    </ul>

  </main>
  <script src="https://unpkg.com/stein-js-client"></script>
  <script>
    const ul = document.getElementById('ul')
    const editform = document.getElementById('editform');

    const store = new SteinStore(
      "https://api.steinhq.com/v1/storages/63a5a77dd27cdd09f0d14d74"
    );
    let get
    store.read("„Ç∑„Éº„Éà1", { limit: 100, offset: 0 }).then(data => {
      console.dir(data);
      get = data
      console.log(" - - - - - - - - - - - ");
      for (let i = 0; i < data.length; i++) {
        const element = data[i];
        const li = document.createElement('li')
        const div = document.createElement('div')
        div.style = "display:flex;"
        const p = document.createElement('p')
        const edit = document.createElement('span')
        edit.textContent = "üò≠"
        edit.style = "margin:16px"
        edit.data = element.ÁôªÈå≤
        p.textContent = element.ÁôªÈå≤
        div.appendChild(p)
        div.appendChild(edit)
        li.appendChild(div)
        ul.appendChild(li)
        edit.addEventListener("click", (e) => {
          if (editform.value == "") {
            return
          }
          store.edit("„Ç∑„Éº„Éà1", {
            search: { ÁôªÈå≤: edit.data },
            set: { ÁôªÈå≤: editform.value }
          })
            .then(res => {
              console.log(res);
              window.location.reload();
            });
        })
      }
    });

    const addform = document.getElementById('addform');
    const addbutton = document.getElementById('addbutton');
    function edit() {
    }
    function add() {
      console.log(addform.value)
      store.append("„Ç∑„Éº„Éà1", [{ ÁôªÈå≤: addform.value }])
        .then(res => {
          console.log(res);
          window.location.reload();
        });
    }

    addbutton.addEventListener("click", () => {
      add();
    });

    const serach = document.getElementById('serach')
    serach.addEventListener('change', (e) => {
      const keyword = e.target.value;
      const $schedules = document.querySelectorAll("#ul > li");
      const $no_schedule = document.querySelector(".no_schedule");
      if (keyword) {
        console.log("„ÅÇ„Çä");
        console.log($schedules);
        console.log($no_schedule);


      } else {
        console.log("Kara");
      }
    })
  </script>
</body>

</html>